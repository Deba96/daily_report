## 取り組んだ課題一覧
- a
- b
## わかったこと
- INSERTクエリが成功すると、特に設定しなくても、追加したレコードのidがresultsオブジェクトのinsertIdというプロパティに入る
- Expressでは、このリクエストとレスポンスの間にサーバーが実行する関数のことをミドルウェア関数と呼ぶ
- コンマで区切ることで複数のミドルウェア関数を作ることができる。next()で次のミドルウェア関数に進む
  
```javascript:test.js
const session = require('express-session');
app.post('/signup', 
  // ミドルウェア関数を追加
  (req, res, next) => {
    console.log('入力値の空チェック');
    //nextで次のミドルウェア関数に進む
    next();
  },
  (req, res) => {
    console.log('ユーザー登録');
    
    const username = req.body.username;
    const email = req.body.email;
    const password = req.body.password;
    connection.query(
      'INSERT INTO users (username, email, password) VALUES (?, ?, ?)',
      [username, email, password],
      (error, results) => {
        req.session.userId = results.insertId;
        req.session.username = username;
        res.redirect('/list');
      }
    );
  }
);
```
- パスワードのハッシュ化には、bcrypt（ビークリプト）というパッケージを用いる npm install bcrypt
## 次やること
- a
- b
## 感じたこと
- a
- b
## 学習時間
- Today: xh
- Total: xh
