## 取り組んだ課題一覧
- タイピング練習
- Web技術の基本を学ぶ
## わかったこと
### アーキテクチャ
- 1回のリクエストからレスポンスを返す間だけ、情報を保持する仕組みをリクエスト・スコープという。リダイレクトすると情報が消える。セッションだけで保持しようとするとメモリを消費してしまうので、1回画面で表示すれば済むものは、リクエスト・スコープを使う
- セッションは、ログイン状態や、ショッピングカートの内容など、複数のリクエストにまたがって情報を保持したい時に使う
- セッションによるメモリ消費を抑えるため、一定の時間が経過したらセッション・タイムアウトする
- ブラウザの設定によってCookieの受け入れを拒否された時に、セッションを実現するために、リクエストのURLにセッションが含まれるように、formタグを書き換えることを「URLリラィテイング」という
- よく使われる設計スタイルや構造のことを「アーキテクチャ」と呼ぶ
- 入力、処理、出力の頭文字をとって「IPO」と呼ぶ。一見複雑そうに見えるアプリであっても、リクエスト単位でみれば、シンプルなIPOを繰り返しである
- MVCについては、Ralisで学習したことの知識の再確認
- MVCのようなよく使われるアーキテクチャの知見を、簡単に実現できるようにしたのが「フレームワーク」
- ビジネスロジックはモデルに書く
- 直接下位のレイヤ以外知る必要が無いように、システムを階層的に組むことを「レイヤパターン」という。このことで責務を分離化し、各レイヤは自身の責務を果たすだけで、システム全体をうまく動かすことができる
- MVCにおいては、プレゼンテーションをビューとコントローラーが担い、ビジネスロジックとデータアクセスをモデルが担う
- データアクセスを実現するためにはDAO（Data Access Object）を利用する。DBに対するCRUDなどの処理をここにまとめる
- プログラミング言語のオブジェクトと、RDBのデータを結びつける仕組みを「O/Rマッピング」という。この仕組みにより、RDBで取得したデータを、プログラムのオブジェクトに変換しなおすといった手間が省けるし、人為的なミスを防ぐことができる
  
- フレームワークのメリット
  - 過去の偉人たちによって築き上げた知見を再利用することで、人為的なミスが減り、コーディングの範囲も狭まるため、品質と生産性が向上する
  - プログラマーが新たにコーディングする箇所が減る分、テストも減らすことができる
  
- フレームワークのデメリット
  - フレームワークの想定範囲を超えた部分の実装が難しいため、利用目的に応じて、技術選定が必要
  - フレームワークは裏側の仕組みをブラックボックス化してしまうため、その部分を意識的にプログラマーが学んでいないと、問題が起きた時に、トラブルシューティングができなくなる
### セキュリティ
#### SQLインジェクション
- 問題
  - フォームの中にSQL文の一部を入力することで、悪意を持ったユーザーが任意のSQLを実行できてしまう
- 対策
  - フレームワークに備わっているバリデーションチェック機能を使う
  - WHEREなど、条件によって変化する部分に後からパラメータを割り当てる、プリアードステートメントを使う
#### クロスサイトスクリプティング
- 問題
  - フォームに入力された値をそのままHTMLに出力した場合、フォームに入力したスクリプトがブラウザ上で実行できてしまう。そうすると、加害者がこのサイトへのリンクを用意して、そのリンクをクリックすると、GETでこのサイトでJavaScriptを渡すように仕組むことで、悪意のあるプログラムを被害者のブラウザで実行できてしまう。サイトへの被害は無いが、踏み台として利用される。
- 対策
  - HTMLを変化させるような文字を、無害な文字に変換する「サニタイジング」をする
#### セッションハイジャック
- 問題
  - セッションの情報は、ユーザー認証するためのセッションIDが含まれており、これを盗むことで、第三者になりすますことができてしまう。
- 対策
  - クロスサイトスクリプティング対策をする
  - 通信をSSLで暗号化する
  - セッションタイムアウトの時間を短くする
  - セッションIDをランダムにする
#### CSRF
- 問題
  - 悪意の無いサイトを装ったサイトへ被害者を導き、そのサイトを開くと、onloadでsubmitが実行されるように書くことで、加害者の用意したデータによるsubmit（掲示板への書き込みなど）ができてしまう。
- 対策
  - ワンタイムトークンを発行して、それを　hidden属性に持たせる。submit時にはこのワンタイムトークンを送信する仕組みにして、サーバー側で発行したワンタイムトークンと一致する場合だけ、submit処理を受け入れる。

## 次やること
- Web技術の基本を学ぶ
## 感じたこと
- フレームワークを使いこなすためには、文法をただなんとなく覚えるのではなくて、なぜそのような仕組みになっているのかを理解することが重要だと感じた。
## 学習時間
- Today: 4h
- Total: 71h
